<!DOCTYPE html>  
<html>
  <head>  
        <script src="http://d3js.org/d3.v3.min.js"></script>
  </head> 
  


<body>
<script>

var color = d3.scale.category10();

var canvas = d3.select("body").append("svg")
    .attr("width",500)
    .attr("height",500);


d3.json("test.json", function(data){

var treemap = d3.layout.treemap()   //layout the treemap
    .size([500,500])
    .nodes(data)

    console.log(treemap);

var cells = canvas.selectAll (".cell")//draw the rectangle
    .data(treemap)   //data from treemap
    .enter()
    .append("g")
    .attr("class", "cell")

cells.append("rect")   //append rect
    .attr("x", function (d) {return d.x; })
    .attr("y", function (d) {return d.y; })
    .attr("width", function (d) {return d.dx; })
    .attr("height", function (d) {return d.dy; })
    .attr("fill", function (d) {return d.children ? null : color(d.parent.name); })   //if it has children, then return null, else return the color of parent
    .attr("stroke", "#fff")


//append texts to rect
cells.append ("text")
     .attr("x", function (d) {return d.x + d.dx /2 })
     .attr("y", function (d) {return d.y + d.dy /2 })
     .attr("text-anchor", "middle")  //make the text on the middle of the rect
     .text(function (d){return d.children ? null : d.name; })  //set up text function



})

	


</script>
		
    </body>  
</html>  
